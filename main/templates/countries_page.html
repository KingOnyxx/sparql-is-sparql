{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>Country Details: {{ country_data.name }}</h2>

    <!-- Display the flag image if the flag_url is available -->
    {% if flag_url %}
    <div class="mb-3">
        <img src="{{ flag_url }}" alt="Flag" style="width:200px;height:auto;">
    </div>
    {% else %}
    <p>No flag found for {{ country_data.name }}.</p>
    {% endif %}

    <!-- Country Data Table -->
    <table class="table">
        <tr><th>Code</th><td>{{ country_data.code }}</td></tr>
        <tr><th>Name</th><td>{{ country_data.name }}</td></tr>
        <tr><th>Continent</th><td>{{ country_data.continent }}</td></tr>
        <!-- For Airports -->
        <tr>
            <th>Airports</th>
            <td>
                <ul>
                    {% for airport in airports_page %}
                        <li>
                            <a href="{% url 'airport_details' airport_id=airport.id %}" class="highlighted-cell">
                                {{ airport.label }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
                <div class="pagination">
                    {% if airports_page.has_previous %}
                        <a href="?airport_page={{ airports_page.previous_page_number }}&region_page={{ regions_page.number }}">Previous</a>
                    {% endif %}
                    <span>Page {{ airports_page.number }} of {{ airports_page.paginator.num_pages }}</span>
                    {% if airports_page.has_next %}
                        <a href="?airport_page={{ airports_page.next_page_number }}&region_page={{ regions_page.number }}">Next</a>
                    {% endif %}
                </div>
            </td>
        </tr>
        
        <tr>
            <th>Regions Contained</th>
            <td>
                <ul>
                    {% for region in regions_page %}
                        <li>
                            <a href="{% url 'region_details' region_id=region.id %}" class="highlighted-cell">
                                {{ region.label }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
                <div class="pagination">
                    {% if regions_page.has_previous %}
                        <a href="?region_page={{ regions_page.previous_page_number }}&airport_page={{ airports_page.number }}">Previous</a>
                    {% endif %}
                    <span>Page {{ regions_page.number }} of {{ regions_page.paginator.num_pages }}</span>
                    {% if regions_page.has_next %}
                        <a href="?region_page={{ regions_page.next_page_number }}&airport_page={{ airports_page.number }}">Next</a>
                    {% endif %}
                </div>
            </td>
        </tr>
        
        
        <tr><th>Region is Contained In</th><td>{{ country_data.region_is_contained_in_label }}</td></tr>
        <tr><th>Population</th><td>{{ country_data.population }}</td></tr>
        <tr><th>Area</th><td>{{ country_data.area }}</td></tr>
        <tr><th>Population Density</th><td>{{ country_data.pop_density }}</td></tr>
        <tr><th>Coastline</th><td>{{ country_data.coastline }}</td></tr>
        <tr><th>Net Migration</th><td>{{ country_data.net_migration }}</td></tr>
        <tr><th>Infant Mortality</th><td>{{ country_data.infant_mortality }}</td></tr>
        <tr><th>GDP</th><td>{{ country_data.gdp }}</td></tr>
        <tr><th>Literacy Rate</th><td>{{ country_data.literacy }}</td></tr>
        <tr><th>Phones</th><td>{{ country_data.phones }}</td></tr>
        <tr><th>Arable</th><td>{{ country_data.arable }}</td></tr>
        <tr><th>Crops</th><td>{{ country_data.crops }}</td></tr>
        <tr><th>Other</th><td>{{ country_data.other }}</td></tr>
        <tr><th>Climate</th><td>{{ country_data.climate }}</td></tr>
        <tr><th>Birthrate</th><td>{{ country_data.birthrate }}</td></tr>
        <tr><th>Deathrate</th><td>{{ country_data.deathrate }}</td></tr>
        <tr><th>Agriculture</th><td>{{ country_data.agriculture }}</td></tr>
        <tr><th>Industry</th><td>{{ country_data.industry }}</td></tr>
        <tr><th>Service</th><td>{{ country_data.service }}</td></tr>
    </table>
</div>
{% endblock %}
